image _nat_mask = "mod_assets/MPT/natsuki/mask.png"

image _nat_ff_tail = "mod_assets/MPT/natsuki/tail_forward.png"
image _nat_fs_tail = "mod_assets/MPT/natsuki/tail_sad.png"

image _nat_ff_cut_a = "mod_assets/MPT/natsuki/ff_cut_a.png"
image _nat_ff_cut_b = "mod_assets/MPT/natsuki/ff_cut_b.png"

image _nat_ff_n1:
    "mod_assets/MPT/natsuki/ff_nose_n1.png"
image _nat_ff_n2:
    "mod_assets/MPT/natsuki/ff_nose_n2.png"
image _nat_ff_n3:
    "mod_assets/MPT/natsuki/ff_nose_n3.png"
image _nat_ff_n4:
    "mod_assets/MPT/natsuki/ff_nose_n4.png"

image _nat_ff_ma:
    "mod_assets/MPT/natsuki/ff_mouth_ma.png"
image _nat_ff_mb:
    "mod_assets/MPT/natsuki/ff_mouth_mb.png"
image _nat_ff_mc:
    "mod_assets/MPT/natsuki/ff_mouth_mc.png"
image _nat_ff_md:
    "mod_assets/MPT/natsuki/ff_mouth_md.png"
image _nat_ff_me:
    "mod_assets/MPT/natsuki/ff_mouth_me.png"
image _nat_ff_mf:
    "mod_assets/MPT/natsuki/ff_mouth_mf.png"
image _nat_ff_mg:
    "mod_assets/MPT/natsuki/ff_mouth_mg.png"
image _nat_ff_mh:
    "mod_assets/MPT/natsuki/ff_mouth_mh.png"
image _nat_ff_mi:
    "mod_assets/MPT/natsuki/ff_mouth_mi.png"
image _nat_ff_mj:
    "mod_assets/MPT/natsuki/ff_mouth_mj.png"
image _nat_ff_mk:
    "mod_assets/MPT/natsuki/ff_mouth_mk.png"
image _nat_ff_ml:
    "mod_assets/MPT/natsuki/ff_mouth_ml.png"
image _nat_ff_ml:
    "mod_assets/MPT/natsuki/ff_mouth_ml.png"
image _nat_ff_mm:
    "mod_assets/MPT/natsuki/ff_mouth_mm.png"
image _nat_ff_mn:
    "mod_assets/MPT/natsuki/ff_mouth_mn.png"
image _nat_ff_mo:
    "mod_assets/MPT/natsuki/ff_mouth_mo.png"
image _nat_ff_mp:
    "mod_assets/MPT/natsuki/ff_mouth_mp.png"
image _nat_ff_mq:
    "mod_assets/MPT/natsuki/ff_mouth_mq.png"
image _nat_ff_mr:
    "mod_assets/MPT/natsuki/ff_mouth_mr.png"

image _n_ff_tears_a_a = "mod_assets/MPT/natsuki/ff_tears_a_a.png" # °°
image _n_ff_tears_a_b = "mod_assets/MPT/natsuki/ff_tears_a_b.png" # vv / ^^

image _n_ff_tears_b_a = "mod_assets/MPT/natsuki/ff_tears_b_a.png"
image _n_ff_tears_b_b = "mod_assets/MPT/natsuki/ff_tears_b_b.png"

image _n_ff_eyes_e1a    = "mod_assets/MPT/natsuki/ff_eyes_e1a.png" # neutral
image _n_ff_eyes_e1b    = "mod_assets/MPT/natsuki/ff_eyes_e2a.png" # surprised
image _n_ff_eyes_e1c    = "mod_assets/MPT/natsuki/ff_eyes_e2d.png" # very surprised
image _n_ff_eyes_e1d    = "mod_assets/MPT/natsuki/ff_eyes_e1d.png" # really now?
image _n_ff_eyes_e2a    = "mod_assets/MPT/natsuki/ff_eyes_e1b.png" # left
image _n_ff_eyes_e2b    = "mod_assets/MPT/natsuki/ff_eyes_e2b.png" # left + surprised
image _n_ff_eyes_e2c    = "mod_assets/MPT/natsuki/ff_eyes_e1c.png" # right
image _n_ff_eyes_e2d    = "mod_assets/MPT/natsuki/ff_eyes_e2c.png" # right + surprised
image _n_ff_eyes_e3a    = "mod_assets/MPT/natsuki/ff_eyes_e1e.png" # left blink
image _n_ff_eyes_e3b    = "mod_assets/MPT/natsuki/ff_eyes_e1f.png" # right blink
image _n_ff_eyes_e3c    = "mod_assets/MPT/natsuki/ff_eyes_e4a.png" # closed
image _n_ff_eyes_e3d    = "mod_assets/MPT/natsuki/ff_eyes_e4b.png" # closed + happy
image _n_ff_eyes_crazy1 = "mod_assets/MPT/natsuki/ff_eyes_e0b.png"
image _n_ff_eyes_crazy2 = "mod_assets/MPT/natsuki/ff_eyes_e3a.png"
image _n_ff_eyes_crazy3 = "mod_assets/MPT/natsuki/ff_eyes_e3b.png"
image _n_ff_eyes_dead1  = "mod_assets/MPT/natsuki/ff_eyes_e0a.png"
image _n_ff_eyes_xd     = "mod_assets/MPT/natsuki/ff_eyes_e4c.png"

image _n_ff_eyes_e1a_ta    = FixedFitFirst("_n_ff_eyes_e1a", "_n_ff_tears_a_a")
image _n_ff_eyes_e1b_ta    = FixedFitFirst("_n_ff_eyes_e1b", "_n_ff_tears_a_a")
image _n_ff_eyes_e1c_ta    = FixedFitFirst("_n_ff_eyes_e1c", "_n_ff_tears_a_a")
image _n_ff_eyes_e1d_ta    = FixedFitFirst("_n_ff_eyes_e1d", "_n_ff_tears_a_a")
image _n_ff_eyes_e2a_ta    = FixedFitFirst("_n_ff_eyes_e2a", "_n_ff_tears_a_a")
image _n_ff_eyes_e2b_ta    = FixedFitFirst("_n_ff_eyes_e2b", "_n_ff_tears_a_a")
image _n_ff_eyes_e2c_ta    = FixedFitFirst("_n_ff_eyes_e2c", "_n_ff_tears_a_a")
image _n_ff_eyes_e2d_ta    = FixedFitFirst("_n_ff_eyes_e2d", "_n_ff_tears_a_a")
image _n_ff_eyes_e3a_ta    = FixedFitFirst("_n_ff_eyes_e3a", "_n_ff_tears_a_a")
image _n_ff_eyes_e3b_ta    = FixedFitFirst("_n_ff_eyes_e3b", "_n_ff_tears_a_a")
image _n_ff_eyes_e3c_ta    = FixedFitFirst("_n_ff_eyes_e3c", "_n_ff_tears_a_b")
image _n_ff_eyes_e3d_ta    = FixedFitFirst("_n_ff_eyes_e3d", "_n_ff_tears_a_b")
image _n_ff_eyes_crazy1_ta = FixedFitFirst("_n_ff_eyes_crazy1", "_n_ff_tears_a_a")
image _n_ff_eyes_crazy2_ta = FixedFitFirst("_n_ff_eyes_crazy2", "_n_ff_tears_a_a")
image _n_ff_eyes_crazy3_ta = FixedFitFirst("_n_ff_eyes_crazy3", "_n_ff_tears_a_a")
image _n_ff_eyes_dead1_ta  = FixedFitFirst("_n_ff_eyes_dead1", "_n_ff_tears_a_a")

image _n_ff_eyes_e1a_tb    = FixedFitFirst("_n_ff_eyes_e1a", "_n_ff_tears_b_a")
image _n_ff_eyes_e1b_tb    = FixedFitFirst("_n_ff_eyes_e1b", "_n_ff_tears_b_a")
image _n_ff_eyes_e1c_tb    = FixedFitFirst("_n_ff_eyes_e1c", "_n_ff_tears_b_a")
image _n_ff_eyes_e1d_tb    = FixedFitFirst("_n_ff_eyes_e1d", "_n_ff_tears_b_a")
image _n_ff_eyes_e2a_tb    = FixedFitFirst("_n_ff_eyes_e2a", "_n_ff_tears_b_a")
image _n_ff_eyes_e2b_tb    = FixedFitFirst("_n_ff_eyes_e2b", "_n_ff_tears_b_a")
image _n_ff_eyes_e2c_tb    = FixedFitFirst("_n_ff_eyes_e2c", "_n_ff_tears_b_a")
image _n_ff_eyes_e2d_tb    = FixedFitFirst("_n_ff_eyes_e2d", "_n_ff_tears_b_a")
image _n_ff_eyes_e3a_tb    = FixedFitFirst("_n_ff_eyes_e3a", "_n_ff_tears_b_a")
image _n_ff_eyes_e3b_tb    = FixedFitFirst("_n_ff_eyes_e3b", "_n_ff_tears_b_a")
image _n_ff_eyes_e3c_tb    = FixedFitFirst("_n_ff_eyes_e3c", "_n_ff_tears_b_b")
image _n_ff_eyes_e3d_tb    = FixedFitFirst("_n_ff_eyes_e3d", "_n_ff_tears_b_b")
image _n_ff_eyes_crazy1_tb = FixedFitFirst("_n_ff_eyes_crazy1", "_n_ff_tears_b_a")
image _n_ff_eyes_crazy2_tb = FixedFitFirst("_n_ff_eyes_crazy2", "_n_ff_tears_b_a")
image _n_ff_eyes_crazy3_tb = FixedFitFirst("_n_ff_eyes_crazy3", "_n_ff_tears_b_a")
image _n_ff_eyes_dead1_tb  = FixedFitFirst("_n_ff_eyes_dead1", "_n_ff_tears_b_a")
    
init python:
    n_turned_ff_blink = CharacterBlink("_n_ff_eyes_e3d", "_n_ff_eyes_e3c")
    n_turned_ff_blink_ta = CharacterBlink("_n_ff_eyes_e3d_ta", "_n_ff_eyes_e3c_ta")
    n_turned_ff_blink_tb = CharacterBlink("_n_ff_eyes_e3d_tb", "_n_ff_eyes_e3c_tb")

image _nat_ff_b1a:
    "mod_assets/MPT/natsuki/ff_eyebrows_b1a.png"
image _nat_ff_b1b:
    "mod_assets/MPT/natsuki/ff_eyebrows_b1b.png"
image _nat_ff_b1c:
    "mod_assets/MPT/natsuki/ff_eyebrows_b1c.png"
image _nat_ff_b1d:
    "mod_assets/MPT/natsuki/ff_eyebrows_b1d.png"
image _nat_ff_b1e:
    "mod_assets/MPT/natsuki/ff_eyebrows_b1e.png"
image _nat_ff_b1f:
    "mod_assets/MPT/natsuki/ff_eyebrows_b1f.png"
image _nat_ff_b2a:
    "mod_assets/MPT/natsuki/ff_eyebrows_b2a.png"
image _nat_ff_b2b:
    "mod_assets/MPT/natsuki/ff_eyebrows_b2b.png"
image _nat_ff_b2c:
    "mod_assets/MPT/natsuki/ff_eyebrows_b2c.png"
image _nat_ff_b3a:
    "mod_assets/MPT/natsuki/ff_eyebrows_b3a.png"
image _nat_ff_b3b:
    "mod_assets/MPT/natsuki/ff_eyebrows_b3b.png"
image _nat_ff_b3c:
    "mod_assets/MPT/natsuki/ff_eyebrows_b3c.png"

image _nat_fs_n1:
    "mod_assets/MPT/natsuki/fs_nose_n1.png"
image _nat_fs_n2:
    "mod_assets/MPT/natsuki/fs_nose_n2.png"
image _nat_fs_n3:
    "mod_assets/MPT/natsuki/fs_nose_n3.png"
image _nat_fs_n4:
    "mod_assets/MPT/natsuki/fs_nose_n4.png"
image _nat_fs_n5:
    "mod_assets/MPT/natsuki/fs_nose_n5.png"
    
image _nat_fs_m1:
    "mod_assets/MPT/natsuki/fs_mouth_m1.png"
image _nat_fs_m2:
    "mod_assets/MPT/natsuki/fs_mouth_m2.png"
image _nat_fs_m3:
    "mod_assets/MPT/natsuki/fs_mouth_m3.png"
image _nat_fs_m4:
    "mod_assets/MPT/natsuki/fs_mouth_m4.png"

image _nat_fs_ea:
    "mod_assets/MPT/natsuki/fs_eyes_ea.png"
image _nat_fs_eb:
    "mod_assets/MPT/natsuki/fs_eyes_eb.png"

image _nat_fs_b1:
    "mod_assets/MPT/natsuki/fs_eyebrows_b1.png"
image _nat_fs_b2:
    "mod_assets/MPT/natsuki/fs_eyebrows_b2.png"
image _nat_fs_b3:
    "mod_assets/MPT/natsuki/fs_eyebrows_b3.png"

# image _nat_forward_blink = blinking_eyes("mod_assets/MPT/natsuki/forward_blink_%s.png")
# image _nat_sad_blink = blinking_eyes("mod_assets/MPT/natsuki/sad_blink_%s.png")
# image _nat_leaning_blink = blinking_eyes("mod_assets/MPT/natsuki/leaning_blink_%s.png")

define natblinkforward = CharacterBlink("_nat_ff_e4b", "_nat_ff_e4a")
define natblinksad = CharacterBlink("mod_assets/MPT/natsuki/sad_blink_a.png", "_nat_fs_eb")

layeredimage _natsuki turned:
    group outfit:
        attribute uniform default null
        attribute casual null   
    
    group left:
        attribute ldown default if_any "uniform":
            "mod_assets/MPT/natsuki/outfits/turned_uniform_ldown.png"
        attribute ldown default if_any "casual":
            "mod_assets/MPT/natsuki/outfits/turned_casual_ldown.png"
        attribute lhip if_any "uniform":
            "mod_assets/MPT/natsuki/outfits/turned_uniform_lhip.png"
        attribute lhip if_any "casual":
            "mod_assets/MPT/natsuki/outfits/turned_casual_lhip.png"
        attribute lpoint if_any "uniform":
            "mod_assets/MPT/natsuki/outfits/turned_uniform_lpoint.png"
        attribute lpoint if_any "casual":
            "mod_assets/MPT/natsuki/outfits/turned_casual_lpoint.png"
    
    group right:
        attribute rdown default if_any "uniform":
            "mod_assets/MPT/natsuki/outfits/turned_uniform_rdown.png"
        attribute rdown default if_any "casual":
            "mod_assets/MPT/natsuki/outfits/turned_casual_rdown.png"
        attribute rhip if_any "uniform":
            "mod_assets/MPT/natsuki/outfits/turned_uniform_rhip.png"
        attribute rhip if_any "casual":
            "mod_assets/MPT/natsuki/outfits/turned_casual_rhip.png"
    
    group armband:
        attribute band default if_all ["ldown", "uniform"]:
            "mod_assets/MPT/natsuki/outfits/band_ldown.png"
        attribute band default if_all ["lhip", "uniform"]:
            "mod_assets/MPT/natsuki/outfits/band_lhip.png"
        attribute noband null
    
    group head:        
        attribute ff default:
            "mod_assets/MPT/natsuki/face_forward.png"
        attribute fs:
            "mod_assets/MPT/natsuki/face_sad.png"
    
    group tail if_all "ff" if_not "fs":
        attribute tail default:
            "_nat_ff_tail"
        attribute notail null
    
    group mask if_all "ff" if_not "fs":
        attribute nomask default null
        attribute mask:
            "_nat_mask"
    
    group nose if_all "ff" if_not "fs":
        attribute na default:
            "_nat_ff_n1"
        attribute nb:
            "_nat_ff_n2"
        attribute nc:
            "_nat_ff_n3"
        attribute nd:
            "_nat_ff_n4"
    
    group cut if_all "ff" if_not "fs":
        attribute nocut default null
        attribute cut_a:
            "_nat_ff_cut_a"
        attribute cut_b:
            "_nat_ff_cut_b"
    
    group mouth if_all "ff" if_not "fs":
        attribute ma default:
            "_nat_ff_ma" # smiling
        attribute mb:
            "_nat_ff_mb" # talking + smiling
        attribute mc:
            "_nat_ff_mc" # talking + big ass smile
        attribute md:
            "_nat_ff_md" # o_o
        attribute me:
            "_nat_ff_me" # slightly open
        attribute mf:
            "_nat_ff_mf" # .
        attribute mg:
            "_nat_ff_mg" # slightly open + talking
        attribute mh:
            "_nat_ff_mh" # talking 1
        attribute mi:
            "_nat_ff_mi" # talking 2
        attribute mj:
            "_nat_ff_mj" # :(
        attribute mk:
            "_nat_ff_mk" # embarassed
        attribute ml:
            "_nat_ff_ml" # wide open
        attribute mm:
            "_nat_ff_mm" # anger
        attribute mn:
            "_nat_ff_mn" # smug
        attribute mo:
            "_nat_ff_mo" # monkalaugh
        attribute mp:
            "_nat_ff_mp" # crazy
        attribute mq:
            "_nat_ff_mq" # wide open 2
        attribute mr:
            "_nat_ff_mr" # no
    
    group tears:
        attribute notears default null
        attribute tears_a null
        attribute tears_b null

    group blink:
        attribute blink default null
        attribute noblink null
    
    group eyes:
        attribute e1a default if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e1a")
        attribute e1b if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e1b")
        attribute e1c if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e1c")
        attribute e1d if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e1d")
        attribute e2a if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e2a")
        attribute e2b if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e2b")
        attribute e2c if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e2c")
        attribute e2d if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e2d")
        attribute e3a if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e3a")
        attribute e3b if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e3b")
        attribute crazy1 if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_crazy1")
        attribute crazy2 if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_crazy2")
        attribute crazy3 if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_crazy3")
        attribute dead1 if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_dead1")
        
        attribute e1a default if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e1a_ta")
        attribute e1b if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e1b_ta")
        attribute e1c if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e1c_ta")
        attribute e1d if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e1d_ta")
        attribute e2a if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e2a_ta")
        attribute e2b if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e2b_ta")
        attribute e2c if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e2c_ta")
        attribute e2d if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e2d_ta")
        attribute e3a if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e3a_ta")
        attribute e3b if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e3b_ta")
        attribute crazy1 if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_crazy1_ta")
        attribute crazy2 if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_crazy2_ta")
        attribute crazy3 if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_crazy3_ta")
        attribute dead1 if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_dead1_ta")
        
        attribute e1a default if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e1a_tb")
        attribute e1b if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e1b_tb")
        attribute e1c if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e1c_tb")
        attribute e1d if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e1d_tb")
        attribute e2a if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e2a_tb")
        attribute e2b if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e2b_tb")
        attribute e2c if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e2c_tb")
        attribute e2d if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e2d_tb")
        attribute e3a if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e3a_tb")
        attribute e3b if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e3b_tb")
        attribute crazy1 if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_crazy1_tb")
        attribute crazy2 if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_crazy2_tb")
        attribute crazy3 if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_crazy3_tb")
        attribute dead1 if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_dead1_tb")
        
        attribute e1a default if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e1a"
        attribute e1b if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e1b"
        attribute e1c if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e1c"
        attribute e1d if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e1d"
        attribute e2a if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e2a"
        attribute e2b if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e2b"
        attribute e2c if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e2c"
        attribute e2d if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e2d"
        attribute e3a if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e3a"
        attribute e3b if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e3b"
        attribute crazy1 if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_crazy1"
        attribute crazy2 if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_crazy2"
        attribute crazy3 if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_crazy3"
        attribute dead1 if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_dead1"
        
        attribute e1a default if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e1a_ta"
        attribute e1b if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e1b_ta"
        attribute e1c if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e1c_ta"
        attribute e1d if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e1d_ta"
        attribute e2a if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e2a_ta"
        attribute e2b if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e2b_ta"
        attribute e2c if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e2c_ta"
        attribute e2d if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e2d_ta"
        attribute e3a if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e3a_ta"
        attribute e3b if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e3b_ta"
        attribute crazy1 if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_crazy1_ta"
        attribute crazy2 if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_crazy2_ta"
        attribute crazy3 if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_crazy3_ta"
        attribute dead1 if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_dead1_ta"
        
        attribute e1a default if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e1a_tb"
        attribute e1b if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e1b_tb"
        attribute e1c if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e1c_tb"
        attribute e1d if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e1d_tb"
        attribute e2a if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e2a_tb"
        attribute e2b if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e2b_tb"
        attribute e2c if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e2c_tb"
        attribute e2d if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e2d_tb"
        attribute e3a if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e3a_tb"
        attribute e3b if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e3b_tb"
        attribute crazy1 if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_crazy1_tb"
        attribute crazy2 if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_crazy2_tb"
        attribute crazy3 if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_crazy3_tb"
        attribute dead1 if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_dead1_tb"
        
        attribute e3c if_not ["tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e3c"
        attribute e3d if_not ["tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e3d"

        attribute e3c if_not ["tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e3c_ta"
        attribute e3d if_not ["tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e3d_ta"

        attribute e3c if_not ["tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e3c_tb"
        attribute e3d if_not ["tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e3d_tb"

        attribute xd if_not "fs" if_all "ff":
            "_n_ff_eyes_xd"
            
    group eyebrows if_all "ff" if_not "fs":
        attribute b1a default:
            "_nat_ff_b1a" # neutral
        attribute b1b:
            "_nat_ff_b3c" # surprised
        attribute b1c:
            "_nat_ff_b2a" # bit surprised
        attribute b1d:
            "_nat_ff_b1d" # bit serious

        attribute b2a:
            "_nat_ff_b1b" # worried
        attribute b2b:
            "_nat_ff_b2b" # slightly worried
        attribute b2c:
            "_nat_ff_b2c" # very worried

        attribute b3a:
            "_nat_ff_b1c" # serious
        attribute b3b:
            "_nat_ff_b3b" # slightly mad
        attribute b3c:
            "_nat_ff_b3a" # very anger
        attribute b3d:
            "_nat_ff_b1e" # anger

        attribute b4:
            "_nat_ff_b1f" # *vine boom*

    group tail if_all "fs" if_not "ff":
        attribute tail default:
            "_nat_fs_tail"
        attribute notail null

    group nose if_all "fs" if_not "ff":
        attribute na default:
            "_nat_fs_n1"
        attribute nb:
            "_nat_fs_n2"
        attribute nc:
            "_nat_fs_n3"
        attribute nd:
            "_nat_fs_n4"
        attribute ne:
            "_nat_fs_n5"
    
    group mouth if_all "fs" if_not "ff":
        attribute ma default:
            "_nat_fs_m4" # smiling
        attribute mb:
            "_nat_fs_m1" # neutral
        attribute mc:
            "_nat_fs_m2" # closed
        attribute md:
            "_nat_fs_m3" # talking
    
    group eyes:
        attribute ea default if_all ["fs", "blink"] if_not ["ff", "ne"]:
            natblinksad("_nat_fs_ea") # neutral

        attribute ea default if_all "fs" if_not ["ff", "ne", "blink"]:
            "_nat_fs_ea" 

        attribute eb if_all "fs" if_not ["ff", "ne"]:
            "_nat_fs_eb" # closed
        
    group eyebrows if_all "fs" if_not ["ff", "ne"]:
        attribute ba default:
            "_nat_fs_b1" # neutral
        attribute bb:
            "_nat_fs_b2" # mad
        attribute bc:
            "_nat_fs_b3" # worried

define -500 _natsuki_cross_offset = (18, 22)

transform _natsuki_cross_face_assets:
    subpixel True offset _natsuki_cross_offset

layeredimage _natsuki cross:    
    group outfit:
        attribute uniform default null
        attribute casual null
    
    group head:
        at _natsuki_cross_face_assets
        
        attribute ff default:
            "mod_assets/MPT/natsuki/face_forward.png"
        attribute fs:
            "mod_assets/MPT/natsuki/face_sad.png"
    
    group tail if_all "ff" if_not "fs":
        at _natsuki_cross_face_assets

        attribute tail default:
            "_nat_ff_tail"
        attribute notail null

    group mask if_all "ff" if_not "fs":
        at _natsuki_cross_face_assets

        attribute nomask default null
        attribute mask:
            "_nat_mask"
    
    always:
        "mod_assets/MPT/natsuki/outfits/crossed_uniform_ff.png" if_all ["uniform", "ff"]
    always:
        "mod_assets/MPT/natsuki/outfits/crossed_uniform_fs.png" if_all "uniform" if_any "fs"
    always:
        "mod_assets/MPT/natsuki/outfits/crossed_casual_ff.png" if_all ["casual", "ff"]
    always:
        "mod_assets/MPT/natsuki/outfits/crossed_casual_fs.png" if_all "casual" if_any "fs"
    
    group armband:
        attribute band default if_any "uniform":
            "mod_assets/MPT/natsuki/outfits/band_crossed.png"
        attribute noband null
    
    group nose if_all "ff" if_not "fs":
        at _natsuki_cross_face_assets

        attribute na default:
            "_nat_ff_n1"
        attribute nb:
            "_nat_ff_n2"
        attribute nc:
            "_nat_ff_n3"
        attribute nd:
            "_nat_ff_n4"
    
    group cut if_all "ff" if_not "fs":
        at _natsuki_cross_face_assets

        attribute nocut default null
        attribute cut_a:
            "_nat_ff_cut_a"
        attribute cut_b:
            "_nat_ff_cut_b"
    
    group mouth if_all "ff" if_not "fs":
        at _natsuki_cross_face_assets

        attribute ma default:
            "_nat_ff_ma"
        attribute mb:
            "_nat_ff_mb"
        attribute mc:
            "_nat_ff_mc"
        attribute md:
            "_nat_ff_md"
        attribute me:
            "_nat_ff_me"
        attribute mf:
            "_nat_ff_mf"
        attribute mg:
            "_nat_ff_mg"
        attribute mh:
            "_nat_ff_mh"
        attribute mi:
            "_nat_ff_mi"
        attribute mj:
            "_nat_ff_mj"
        attribute mk:
            "_nat_ff_mk"
        attribute ml:
            "_nat_ff_ml"
        attribute mm:
            "_nat_ff_mm"
        attribute mn:
            "_nat_ff_mn"
        attribute mo:
            "_nat_ff_mo"
        attribute mp:
            "_nat_ff_mp"
        attribute mq:
            "_nat_ff_mq"
        attribute mr:
            "_nat_ff_mr"
    
    group tears:
        attribute notears default null
        attribute tears_a null
        attribute tears_b null

    group blink:
        attribute blink default null
        attribute noblink null

    group eyes:
        at _natsuki_cross_face_assets

        attribute e1a default if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e1a")
        attribute e1b if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e1b")
        attribute e1c if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e1c")
        attribute e1d if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e1d")
        attribute e2a if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e2a")
        attribute e2b if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e2b")
        attribute e2c if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e2c")
        attribute e2d if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e2d")
        attribute e3a if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e3a")
        attribute e3b if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_e3b")
        attribute crazy1 if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_crazy1")
        attribute crazy2 if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_crazy2")
        attribute crazy3 if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_crazy3")
        attribute dead1 if_all ["blink", "ff"] if_not ["tears_a", "tears_b", "fs"]:
            n_turned_ff_blink("_n_ff_eyes_dead1")
        
        attribute e1a default if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e1a_ta")
        attribute e1b if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e1b_ta")
        attribute e1c if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e1c_ta")
        attribute e1d if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e1d_ta")
        attribute e2a if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e2a_ta")
        attribute e2b if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e2b_ta")
        attribute e2c if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e2c_ta")
        attribute e2d if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e2d_ta")
        attribute e3a if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e3a_ta")
        attribute e3b if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_e3b_ta")
        attribute crazy1 if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_crazy1_ta")
        attribute crazy2 if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_crazy2_ta")
        attribute crazy3 if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_crazy3_ta")
        attribute dead1 if_all ["blink", "tears_a", "ff"] if_not ["tears_b", "fs"]:
            n_turned_ff_blink_ta("_n_ff_eyes_dead1_ta")
        
        attribute e1a default if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e1a_tb")
        attribute e1b if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e1b_tb")
        attribute e1c if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e1c_tb")
        attribute e1d if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e1d_tb")
        attribute e2a if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e2a_tb")
        attribute e2b if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e2b_tb")
        attribute e2c if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e2c_tb")
        attribute e2d if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e2d_tb")
        attribute e3a if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e3a_tb")
        attribute e3b if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_e3b_tb")
        attribute crazy1 if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_crazy1_tb")
        attribute crazy2 if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_crazy2_tb")
        attribute crazy3 if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_crazy3_tb")
        attribute dead1 if_all ["blink", "tears_b", "ff"] if_not ["tears_a", "fs"]:
            n_turned_ff_blink_tb("_n_ff_eyes_dead1_tb")
        
        attribute e1a default if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e1a"
        attribute e1b if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e1b"
        attribute e1c if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e1c"
        attribute e1d if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e1d"
        attribute e2a if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e2a"
        attribute e2b if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e2b"
        attribute e2c if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e2c"
        attribute e2d if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e2d"
        attribute e3a if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e3a"
        attribute e3b if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e3b"
        attribute crazy1 if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_crazy1"
        attribute crazy2 if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_crazy2"
        attribute crazy3 if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_crazy3"
        attribute dead1 if_not ["blink", "tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_dead1"
        
        attribute e1a default if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e1a_ta"
        attribute e1b if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e1b_ta"
        attribute e1c if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e1c_ta"
        attribute e1d if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e1d_ta"
        attribute e2a if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e2a_ta"
        attribute e2b if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e2b_ta"
        attribute e2c if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e2c_ta"
        attribute e2d if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e2d_ta"
        attribute e3a if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e3a_ta"
        attribute e3b if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e3b_ta"
        attribute crazy1 if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_crazy1_ta"
        attribute crazy2 if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_crazy2_ta"
        attribute crazy3 if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_crazy3_ta"
        attribute dead1 if_not ["blink", "tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_dead1_ta"
        
        attribute e1a default if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e1a_tb"
        attribute e1b if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e1b_tb"
        attribute e1c if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e1c_tb"
        attribute e1d if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e1d_tb"
        attribute e2a if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e2a_tb"
        attribute e2b if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e2b_tb"
        attribute e2c if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e2c_tb"
        attribute e2d if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e2d_tb"
        attribute e3a if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e3a_tb"
        attribute e3b if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e3b_tb"
        attribute crazy1 if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_crazy1_tb"
        attribute crazy2 if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_crazy2_tb"
        attribute crazy3 if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_crazy3_tb"
        attribute dead1 if_not ["blink", "tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_dead1_tb"
        
        attribute e3c if_not ["tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e3c"
        attribute e3d if_not ["tears_a", "tears_b", "fs"] if_all "ff":
            "_n_ff_eyes_e3d"

        attribute e3c if_not ["tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e3c_ta"
        attribute e3d if_not ["tears_b", "fs"] if_all ["tears_a", "ff"]:
            "_n_ff_eyes_e3d_ta"

        attribute e3c if_not ["tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e3c_tb"
        attribute e3d if_not ["tears_a", "fs"] if_all ["tears_b", "ff"]:
            "_n_ff_eyes_e3d_tb"

        attribute xd if_not "fs" if_all "ff":
            "_n_ff_eyes_xd"
        
    group eyebrows if_all "ff" if_not "fs":
        at _natsuki_cross_face_assets
        
        attribute b1a default:
            "_nat_ff_b1a"
        attribute b1b:
            "_nat_ff_b3c"
        attribute b1c:
            "_nat_ff_b2a"
        attribute b1d:
            "_nat_ff_b1d"

        attribute b2a:
            "_nat_ff_b1b"
        attribute b2b:
            "_nat_ff_b2b"
        attribute b2c:
            "_nat_ff_b2c"

        attribute b3a:
            "_nat_ff_b1c"
        attribute b3b:
            "_nat_ff_b3b"
        attribute b3c:
            "_nat_ff_b3a"
        attribute b3d:
            "_nat_ff_b1e"

        attribute b4:
            "_nat_ff_b1f"
    
    group tail if_all "fs" if_not "ff":
        at _natsuki_cross_face_assets
        
        attribute tail default:
            "_nat_fs_tail"
        attribute notail null

    group nose if_all "fs" if_not "ff":
        at _natsuki_cross_face_assets

        attribute na default:
            "_nat_fs_n1"
        attribute nb:
            "_nat_fs_n2"
        attribute nc:
            "_nat_fs_n3"
        attribute nd:
            "_nat_fs_n4"
        attribute ne:
            "_nat_fs_n5"
    
    group mouth if_all "fs" if_not "ff":
        at _natsuki_cross_face_assets

        attribute ma default:
            "_nat_fs_m1"
        attribute mb:
            "_nat_fs_m2"
        attribute mc:
            "_nat_fs_m3"
        attribute md:
            "_nat_fs_m4"
    
    group eyes:
        at _natsuki_cross_face_assets

        attribute ea default if_all ["fs", "blink"] if_not ["ff", "ne"]:
            natblinksad("_nat_fs_ea") # neutral

        attribute ea default if_all "fs" if_not ["ff", "ne", "blink"]:
            "_nat_fs_ea" 
        
        attribute eb if_all "fs" if_not ["ff", "ne"]:
            "_nat_fs_eb" # closed
            
    group eyebrows if_all "fs" if_not ["ff", "ne"]:
        at _natsuki_cross_face_assets
        
        attribute ba default:
            "_nat_fs_b1"
        attribute bb:
            "_nat_fs_b2"
        attribute bc:
            "_nat_fs_b3"

define -500 _natsuki_lean_offset = (-106.5, -44)

transform _natsuki_lean_face_assets(child):
    Transform(child, offset=_natsuki_lean_offset, subpixel=True)
    subpixel True matrixtransform RotateMatrix(0, 0, -15)

define -500 _natsuki_lean_ycrop = 50

layeredimage _natsuki lean:
    at Transform(crop=(0.0, 0.0, 1.0, 960 - _natsuki_lean_ycrop)), Transform(padding=(0, _natsuki_lean_ycrop, 0, 0))
    group armband:
        attribute band default null
        attribute noband null

    group outfit:
        attribute uniform default:
            "mod_assets/MPT/natsuki/outfits/leaning_uniform.png"
        attribute casual:
            "mod_assets/MPT/natsuki/outfits/leaning_casual.png"
    
    group tail:
        at _natsuki_lean_face_assets

        attribute tail default:
            "_nat_ff_tail"
        attribute notail null

    group mask:
        at _natsuki_lean_face_assets

        attribute nomask default null
        attribute mask:
            "_nat_mask"
    
    group nose:
        at _natsuki_lean_face_assets

        attribute na default:
            "_nat_ff_n1"
        attribute nb:
            "_nat_ff_n2"
        attribute nc:
            "_nat_ff_n3"
        attribute nd:
            "_nat_ff_n4"
    
    group cut:
        at _natsuki_lean_face_assets

        attribute nocut default null
        attribute cut_a:
            "_nat_ff_cut_a"
        attribute cut_b:
            "_nat_ff_cut_b"
    
    group mouth:
        at _natsuki_lean_face_assets

        attribute ma default:
            "_nat_ff_ma" # smiling
        attribute mb:
            "_nat_ff_mb" # talking + smiling
        attribute mc:
            "_nat_ff_mc" # talking + big ass smile
        attribute md:
            "_nat_ff_md" # o_o
        attribute me:
            "_nat_ff_me" # slightly open
        attribute mf:
            "_nat_ff_mf" # .
        attribute mg:
            "_nat_ff_mg" # slightly open + talking
        attribute mh:
            "_nat_ff_mh" # talking 1
        attribute mi:
            "_nat_ff_mi" # talking 2
        attribute mj:
            "_nat_ff_mj" # :(
        attribute mk:
            "_nat_ff_mk" # embarassed
        attribute ml:
            "_nat_ff_ml" # wide open
        attribute mm:
            "_nat_ff_mm" # anger
        attribute mn:
            "_nat_ff_mn" # smug
        attribute mo:
            "_nat_ff_mo" # monkalaugh
        attribute mp:
            "_nat_ff_mp" # crazy
        attribute mq:
            "_nat_ff_mq" # wide open 2
        attribute mr:
            "_nat_ff_mr" # no
    
    group tears:
        attribute notears default null
        attribute tears_a null
        attribute tears_b null
    
    group blink:
        attribute blink default null
        attribute noblink null
    
    group eyes:
        at _natsuki_lean_face_assets
        
        attribute e1a default if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_e1a")
        attribute e1b if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_e1b")
        attribute e1c if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_e1c")
        attribute e1d if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_e1d")
        attribute e2a if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_e2a")
        attribute e2b if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_e2b")
        attribute e2c if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_e2c")
        attribute e2d if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_e2d")
        attribute e3a if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_e3a")
        attribute e3b if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_e3b")
        attribute crazy1 if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_crazy1")
        attribute crazy2 if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_crazy2")
        attribute crazy3 if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_crazy3")
        attribute dead1 if_all "blink" if_not ["tears_a", "tears_b"]:
            n_turned_ff_blink("_n_ff_eyes_dead1")
        
        attribute e1a default if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_e1a_ta")
        attribute e1b if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_e1b_ta")
        attribute e1c if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_e1c_ta")
        attribute e1d if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_e1d_ta")
        attribute e2a if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_e2a_ta")
        attribute e2b if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_e2b_ta")
        attribute e2c if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_e2c_ta")
        attribute e2d if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_e2d_ta")
        attribute e3a if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_e3a_ta")
        attribute e3b if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_e3b_ta")
        attribute crazy1 if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_crazy1_ta")
        attribute crazy2 if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_crazy2_ta")
        attribute crazy3 if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_crazy3_ta")
        attribute dead1 if_all ["blink", "tears_a"] if_not "tears_b":
            n_turned_ff_blink_ta("_n_ff_eyes_dead1_ta")
        
        attribute e1a default if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_e1a_tb")
        attribute e1b if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_e1b_tb")
        attribute e1c if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_e1c_tb")
        attribute e1d if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_e1d_tb")
        attribute e2a if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_e2a_tb")
        attribute e2b if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_e2b_tb")
        attribute e2c if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_e2c_tb")
        attribute e2d if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_e2d_tb")
        attribute e3a if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_e3a_tb")
        attribute e3b if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_e3b_tb")
        attribute crazy1 if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_crazy1_tb")
        attribute crazy2 if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_crazy2_tb")
        attribute crazy3 if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_crazy3_tb")
        attribute dead1 if_all ["blink", "tears_a"] if_not "tears_a":
            n_turned_ff_blink_tb("_n_ff_eyes_dead1_tb")
        
        attribute e1a default if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_e1a"
        attribute e1b if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_e1b"
        attribute e1c if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_e1c"
        attribute e1d if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_e1d"
        attribute e2a if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_e2a"
        attribute e2b if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_e2b"
        attribute e2c if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_e2c"
        attribute e2d if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_e2d"
        attribute e3a if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_e3a"
        attribute e3b if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_e3b"
        attribute crazy1 if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_crazy1"
        attribute crazy2 if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_crazy2"
        attribute crazy3 if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_crazy3"
        attribute dead1 if_not ["blink", "tears_a", "tears_b"]:
            "_n_ff_eyes_dead1"
        
        attribute e1a default if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_e1a_ta"
        attribute e1b if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_e1b_ta"
        attribute e1c if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_e1c_ta"
        attribute e1d if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_e1d_ta"
        attribute e2a if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_e2a_ta"
        attribute e2b if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_e2b_ta"
        attribute e2c if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_e2c_ta"
        attribute e2d if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_e2d_ta"
        attribute e3a if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_e3a_ta"
        attribute e3b if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_e3b_ta"
        attribute crazy1 if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_crazy1_ta"
        attribute crazy2 if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_crazy2_ta"
        attribute crazy3 if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_crazy3_ta"
        attribute dead1 if_not ["blink", "tears_b"] if_all "tears_a":
            "_n_ff_eyes_dead1_ta"
        
        attribute e1a default if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_e1a_tb"
        attribute e1b if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_e1b_tb"
        attribute e1c if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_e1c_tb"
        attribute e1d if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_e1d_tb"
        attribute e2a if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_e2a_tb"
        attribute e2b if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_e2b_tb"
        attribute e2c if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_e2c_tb"
        attribute e2d if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_e2d_tb"
        attribute e3a if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_e3a_tb"
        attribute e3b if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_e3b_tb"
        attribute crazy1 if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_crazy1_tb"
        attribute crazy2 if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_crazy2_tb"
        attribute crazy3 if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_crazy3_tb"
        attribute dead1 if_not ["blink", "tears_a"] if_all "tears_b":
            "_n_ff_eyes_dead1_tb"
        
        attribute e3c if_not ["tears_a", "tears_b"]:
            "_n_ff_eyes_e3c"
        attribute e3d if_not ["tears_a", "tears_b"]:
            "_n_ff_eyes_e3d"

        attribute e3c if_not "tears_b" if_all "tears_a":
            "_n_ff_eyes_e3c_ta"
        attribute e3d if_not "tears_b" if_all "tears_a":
            "_n_ff_eyes_e3d_ta"

        attribute e3c if_not "tears_a" if_all "tears_b":
            "_n_ff_eyes_e3c_tb"
        attribute e3d if_not "tears_a" if_all "tears_b":
            "_n_ff_eyes_e3d_tb"

        attribute xd:
            "_n_ff_eyes_xd"
    
    group eyebrows:
        at _natsuki_lean_face_assets

        attribute b1a default:
            "_nat_ff_b1a" # neutral
    
        attribute b1b:
            "_nat_ff_b3c" # surprised
        attribute b1c:
            "_nat_ff_b2a" # bit surprised
        attribute b1d:
            "_nat_ff_b1d" # bit serious

        attribute b2a:
            "_nat_ff_b1b" # worried
        attribute b2b:
            "_nat_ff_b2b" # slightly worried
        attribute b2c:
            "_nat_ff_b2c" # very worried

        attribute b3a:
            "_nat_ff_b1c" # serious
        attribute b3b:
            "_nat_ff_b3b" # slightly mad
        attribute b3c:
            "_nat_ff_b3a" # very anger
        attribute b3d:
            "_nat_ff_b1e" # anger

        attribute b4:
            "_nat_ff_b1f" # *vine boom*

image natsuki turned = LayeredImageProxy("_natsuki turned", (renpy.partial(Flatten, drawable_resolution=False), AutofocusDisplayable(name="natsuki")))
image natsuki cross = LayeredImageProxy("_natsuki cross", (renpy.partial(Flatten, drawable_resolution=False), AutofocusDisplayable(name="natsuki")))
image natsuki lean = LayeredImageProxy("_natsuki lean", (renpy.partial(Flatten, drawable_resolution=False), AutofocusDisplayable(name="natsuki")))

image side natsuki turned = CharacterSideImage("_natsuki turned", renpy.partial(Flatten, drawable_resolution=False))
image side natsuki cross = CharacterSideImage("_natsuki cross", renpy.partial(Flatten, drawable_resolution=False))
image side natsuki lean = CharacterSideImage("_natsuki lean", renpy.partial(Flatten, drawable_resolution=False))